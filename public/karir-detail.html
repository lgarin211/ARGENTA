<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Detail Karir - Argenta</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
    <style>
      /* HTML Content Styling */
      .html-content {
        line-height: 1.6;
      }
      
      .html-content p {
        margin-bottom: 0.75rem;
      }
      
      .html-content ul, .html-content ol {
        margin-left: 1rem;
        margin-bottom: 0.75rem;
      }
      
      .html-content li {
        margin-bottom: 0.25rem;
      }
      
      .html-content img {
        max-width: 100%;
        height: auto;
        border-radius: 0.25rem;
        margin: 0.5rem 0;
      }
      
      .html-content h1, .html-content h2, .html-content h3 {
        font-weight: bold;
        margin-bottom: 0.5rem;
      }
      
      .html-content h1 { font-size: 1.25rem; }
      .html-content h2 { font-size: 1.125rem; }
      .html-content h3 { font-size: 1rem; }
      
      .html-content strong, .html-content b {
        font-weight: bold;
      }
      
      .html-content em, .html-content i {
        font-style: italic;
      }
      
      .error-message {
        color: #ef4444;
        font-weight: 600;
      }
    </style>
  </head>
  <body class="bg-red-900 text-white font-montserrat leading-relaxed">
    <!-- Loading Overlay -->
    <div id="page-loading" class="fixed inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center z-[9999] transition-opacity duration-300">
      <div class="flex flex-col items-center">
        <svg class="animate-spin h-12 w-12 text-red-900 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path>
        </svg>
        <span class="text-white text-lg font-semibold">Memuat halaman...</span>
      </div>
    </div>

    <header class="fixed w-full top-0 z-50 bg-gradient-to-b from-red-900 via-red-900/90 to-transparent">
      <nav class="container mx-auto flex justify-between items-center p-4">
        <div class="text-2xl font-bold tracking-widest">ARGENTA</div>
        <!-- Hamburger button (mobile only) -->
        <button id="hamburger" class="md:hidden flex flex-col justify-center items-center w-10 h-10 focus:outline-none" aria-label="Open menu">
          <span class="block w-6 h-0.5 bg-white mb-1"></span>
          <span class="block w-6 h-0.5 bg-white mb-1"></span>
          <span class="block w-6 h-0.5 bg-white"></span>
        </button>
        <ul id="navMenu" class="hidden md:flex md:flex-row md:space-x-8 md:static md:bg-transparent md:w-auto md:h-auto md:opacity-100 md:visible fixed top-16 left-0 w-full bg-red-900/95 h-screen flex-col items-center justify-center space-y-8 md:space-y-0 opacity-0 invisible transition-all duration-300 z-40">
          <li class="w-full md:w-auto text-center"><a href="index.html" class="block py-2 md:py-0 hover:text-red-500 font-medium">Perusahaan</a></li>
          <li class="w-full md:w-auto text-center"><a href="#" class="block py-2 md:py-0 hover:text-red-500 font-medium">Layanan</a></li>
          <li class="w-full md:w-auto text-center"><a href="karir.html" class="block py-2 md:py-0 hover:text-red-500 font-medium">Karir</a></li>
          <li class="w-full md:w-auto text-center"><a href="berita.html" class="block py-2 md:py-0 hover:text-red-500 font-medium">Artikel</a></li>
          <li class="w-full md:w-auto text-center"><a href="#" class="block py-2 md:py-0 hover:text-red-500 font-medium">Hubungi Kami</a></li>
        </ul>
      </nav>
    </header>

    <section class="relative bg-gradient-to-b from-red-900 via-black to-black py-16 mt-16 px-6 max-w-6xl mx-auto rounded" id="karir-detail-section" style="min-height:400px">
      <!-- Konten detail karir akan di-load oleh JS -->
    </section>

    <section class="text-center mt-12 mb-8">
      <a href="karir.html" class="text-white font-semibold underline hover:text-red-500">Lihat Kesempatan Karir Lainnya</a>
    </section>

    <footer class="bg-black text-gray-300 mt-12 py-4">
      <div class="text-center">
        <h2 class="text-3xl font-extrabold mb-8 tracking-widest">
          <span class="font-extrabold">Hubungi Kami
        </h2>
      </div>
      <div class="border border-red-900 max-w-6xl mx-auto px-6 py-4 flex flex-col md:flex-row items-center justify-center gap-6">
        <div class="flex items-center space-x-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-900" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 12.414a2 2 0 10-2.828 2.828l4.243 4.243a8 8 0 1111.314-11.314z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <span>Jl. Administrasi Negara I No. 30 Rt. 06 Rw. 07 Bend Hilir</span>
        </div>
        <div class="flex items-center space-x-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-900" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h1l2 2-2 2H3v-4zM21 10h-1l-2 2 2 2h1v-4z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M7 10h10v4H7v-4z" />
          </svg>
          <span>0821-3345-7898</span>
        </div>
        <div class="flex items-center space-x-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-900" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16 12h-4m0 0v-4m0 4v4m0-4h4" />
            <rect width="20" height="14" x="2" y="5" rx="2" ry="2" />
          </svg>
          <span>ArgentaIntramas@gmail.com</span>
        </div>
      </div>
      <div class="max-w-6xl mx-auto px-6 py-10 grid grid-cols-1 md:grid-cols-4 gap-8 text-gray-400">
        <div>
          <div class="flex items-center mb-6 space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-900" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 2L2 7l10 5 10-5-10-5z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M2 17l10 5 10-5" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M2 12l10 5 10-5" />
            </svg>
            <span class="text-red-900 font-bold text-xl tracking-widest">ARGENTA</span>
          </div>
          <ul class="space-y-2 text-sm">
            <li><a href="#" class="hover:text-white">Tentang Kami</a></li>
            <li><a href="#" class="hover:text-white">Berita</a></li>
            <li><a href="#" class="hover:text-white">Karir</a></li>
            <li><a href="#" class="hover:text-white">Layanan</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-4">Lainnya</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="#" class="hover:text-white">Hubungi Kami</a></li>
            <li><a href="#" class="hover:text-white">Legal</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-4">Ikuti Kami</h3>
          <ul class="space-y-2 text-sm">
            <li class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24h11.495v-9.294H9.691v-3.622h3.129V8.413c0-3.1 1.894-4.788 4.659-4.788 1.325 0 2.466.099 2.797.143v3.24l-1.918.001c-1.504 0-1.796.715-1.796 1.763v2.313h3.59l-.467 3.622h-3.123V24h6.116C23.4 24 24 23.4 24 22.675v-21.35C24 .6 23.4 0 22.675 0z"/>
              </svg>
              <a href="#" class="hover:text-white">Facebook</a>
            </li>
            <li class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.35 3.608 1.325.975.975 1.263 2.242 1.325 3.608.058 1.266.07 1.645.07 4.85s-.012 3.584-.07 4.85c-.062 1.366-.35 2.633-1.325 3.608-.975.975-2.242 1.263-3.608 1.325-1.266.058-1.645.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.35-3.608-1.325-.975-.975-1.263-2.242-1.325-3.608C2.175 15.584 2.163 15.204 2.163 12s.012-3.584.07-4.85c.058-1.366.35-2.633 1.325-3.608.975-.975 2.242-1.263 3.608-1.325C8.416 2.175 8.796 2.163 12 2.163zm0-2.163C8.741 0 8.332.013 7.052.072 5.775.13 4.602.443 3.515 1.53 2.428 2.617 2.115 3.79 2.057 5.067.998 6.347.985 6.756.985 10.015s.013 3.668.072 4.948c.058 1.277.371 2.45 1.458 3.537 1.087 1.087 2.26 1.4 3.537 1.458 1.28.059 1.689.072 4.948.072s3.668-.013 4.948-.072c1.277-.058 2.45-.371 3.537-1.458 1.087-1.087 1.4-2.26 1.458-3.537.059-1.28.072-1.689.072-4.948s-.013-3.668-.072-4.948c-.058-1.277-.371-2.45-1.458-3.537-1.087-1.087-2.26-1.4-3.537-1.458C15.668.013 15.259 0 12 0z"/>
                <path d="M12 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998z"/>
                <circle cx="18.406" cy="5.594" r="1.44"/>
              </svg>
              <a href="#" class="hover:text-white">Instagram</a>
            </li>
            <li class="flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.354V9h3.414v1.561h.049c.476-.9 1.637-1.852 3.37-1.852 3.602 0 4.268 2.37 4.268 5.455v6.288z"/>
                <path d="M5.337 7.433a2.062 2.062 0 1 1 0-4.124 2.062 2.062 0 0 1 0 4.124zM6.814 20.452H3.86V9h2.954v11.452z"/>
              </svg>
              <a href="#" class="hover:text-white">LinkedIn</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="md:col-span-4 text-center text-gray-500 text-xs mt-8">
        <p>© 2025 Argenta. All rights reserved.</p>
        <div class="flex justify-center space-x-4 mt-2">
          <a href="#" class="hover:text-white underline text-xs">Privacy Policy</a>
          <a href="#" class="hover:text-white underline text-xs">Terms of Service</a>
          <a href="#" class="hover:text-white underline text-xs">Cookies Settings</a>
        </div>
      </div>
    </div>
  </footer>
  <!-- jQuery (wajib sebelum script navbar) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
    // Helper: get query param
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    // Render karir detail
    function renderKarirDetail(data) {
      const section = document.getElementById('karir-detail-section');
      if (!data) {
        section.innerHTML = '<div class="text-center text-gray-300 py-16 text-xl">Data karir tidak ditemukan.</div>';
        return;
      }
      
      // Parse persyaratan jika berupa string JSON atau HTML
      let persyaratanArray = [];
      if (data.persyaratan) {
        if (Array.isArray(data.persyaratan)) {
          persyaratanArray = data.persyaratan;
        } else if (typeof data.persyaratan === 'string') {
          try {
            // Try parsing as JSON array
            const parsed = JSON.parse(data.persyaratan);
            if (Array.isArray(parsed)) {
              persyaratanArray = parsed;
            } else {
              persyaratanArray = [data.persyaratan];
            }
          } catch (e) {
            // If not JSON, render as HTML directly without parsing
            persyaratanArray = [data.persyaratan];
          }
        }
      }
      
      // Render HTML content safely (for description and persyaratan)
      const renderHtmlContent = (text) => {
        if (!text) return '-';
        return text; // Keep HTML tags for rendering
      };
      
      section.innerHTML = `
        <h1 class="text-3xl font-bold mb-2">${data.title || '-'}</h1>
        <p class="mb-4 text-lg">${data.kategori || '-'}</p>
        <div class="flex items-center mb-8 space-x-4 text-gray-300">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-900" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2v-7H3v7a2 2 0 002 2z" />
          </svg>
          <span>${data.periode || '-'}</span>
          <button class="ml-auto bg-red-900 hover:bg-red-700 text-white font-semibold px-4 py-2 rounded transition">Daftar</button>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="md:col-span-2 bg-red-800 p-6 rounded">
            <h2 class="font-bold text-lg mb-3">Tentang Pekerjaan</h2>
            <div class="html-content space-y-2 text-sm">${renderHtmlContent(data.deskripsi || data.tentang)}</div>
          </div>
          <div class="space-y-6">
            <div class="bg-red-800 p-6 rounded">
              <h2 class="font-bold text-lg mb-3">Persyaratan</h2>
              <div class="html-content space-y-2 text-sm">
                ${persyaratanArray.length > 0
                  ? persyaratanArray.map(item => `<div>${renderHtmlContent(item)}</div>`).join('')
                  : '<div>-</div>'}
              </div>
            </div>
            <div class="bg-red-800 p-6 rounded">
              <h2 class="font-bold text-lg mb-3">Batas Usia</h2>
              <p>${data.batas_usia || '-'}</p>
            </div>
            <div class="bg-red-800 p-6 rounded">
              <h2 class="font-bold text-lg mb-3">Penempatan</h2>
              <p>${data.penempatan || data.lokasi || '-'}</p>
            </div>
          </div>
        </div>
      `;
    }

    // Load karir detail from karir.json
    function loadKarirDetail() {
      const id = getQueryParam('id');
      if (!id) {
        renderKarirDetail(null);
        return;
      }
      const apiUrl = `https://allhub.progesio.my.id/api/hub/argenta/karir`
      const localUrl = 'hook/karir.json';
      fetch(apiUrl)
        .then(r => r.ok ? r.json() : Promise.reject())
        .then(raw => {
          let data = null;
          if (Array.isArray(raw)) {
            data = raw.find(item => String(item.id) === String(id));
          } else if (raw && raw.data && Array.isArray(raw.data)) {
            // Support sample API: { data: [ {...}, ... ], ... }
            if (raw.data[0] && Array.isArray(raw.data[0].karir)) {
              // Legacy format: data[0].karir
              data = raw.data[0].karir.find(item => String(item.id) === String(id));
            } else {
              // New API format: data is array of karir objects
              data = raw.data.find(item => String(item.id) === String(id));
            }
          }
          renderKarirDetail(data);
        })
        .catch(() => {
          // Fallback to local JSON
          fetch(localUrl)
            .then(r => r.ok ? r.json() : Promise.reject())
            .then(raw => {
              let data = null;
              if (Array.isArray(raw)) {
                data = raw.find(item => String(item.id) === String(id));
              } else if (raw && raw.data && Array.isArray(raw.data)) {
                if (raw.data[0] && Array.isArray(raw.data[0].karir)) {
                  data = raw.data[0].karir.find(item => String(item.id) === String(id));
                } else {
                  data = raw.data.find(item => String(item.id) === String(id));
                }
              }
              renderKarirDetail(data);
            })
            .catch(() => renderKarirDetail(null));
        });
    }
    // Hamburger menu logic
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    function showMenu() {
      navMenu.classList.remove('opacity-0', 'invisible', 'hidden');
      navMenu.classList.add('opacity-100', 'visible');
    }
    function hideMenu() {
      navMenu.classList.remove('opacity-100', 'visible');
      navMenu.classList.add('opacity-0', 'invisible', 'hidden');
    }
    hamburger.addEventListener('click', () => {
      const isOpen = navMenu.classList.contains('opacity-100');
      if (isOpen) {
        hideMenu();
      } else {
        showMenu();
      }
    });
    // Close menu on link click (mobile)
    navMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth < 768) {
          hideMenu();
        }
      });
    });
    // Responsive fix on resize
    window.addEventListener('resize', () => {
      if (window.innerWidth >= 768) {
        navMenu.classList.remove('opacity-0', 'invisible', 'hidden', 'flex-col', 'items-center', 'justify-center', 'space-y-8');
        navMenu.classList.add('opacity-100', 'visible', 'flex', 'flex-row', 'space-x-8');
      } else {
        hideMenu();
        navMenu.classList.remove('flex-row', 'space-x-8');
        navMenu.classList.add('flex-col', 'items-center', 'justify-center', 'space-y-8');
      }
    });
    // Initial state
    if (window.innerWidth >= 768) {
      navMenu.classList.remove('opacity-0', 'invisible', 'hidden', 'flex-col', 'items-center', 'justify-center', 'space-y-8');
      navMenu.classList.add('opacity-100', 'visible', 'flex', 'flex-row', 'space-x-8');
    } else {
      hideMenu();
      navMenu.classList.remove('flex-row', 'space-x-8');
      navMenu.classList.add('flex-col', 'items-center', 'justify-center', 'space-y-8');
    }

    // Loading overlay logic
    function showLoading() {
      document.getElementById('page-loading').style.opacity = '1';
      document.getElementById('page-loading').style.pointerEvents = 'auto';
    }
    function hideLoading() {
      document.getElementById('page-loading').style.opacity = '0';
      document.getElementById('page-loading').style.pointerEvents = 'none';
      setTimeout(() => {
        document.getElementById('page-loading').style.display = 'none';
      }, 400);
    }
    document.addEventListener('DOMContentLoaded', function() {
      loadKarirDetail();
      document.querySelectorAll('#navMenu a').forEach(link => {
        link.addEventListener('click', function(e) {
          const href = link.getAttribute('href');
          if (href && href !== '#' && !href.startsWith('javascript:')) {
            showLoading();
          }
        });
      });
      window.addEventListener('load', hideLoading);
      setTimeout(hideLoading, 2000);
    });
    </script>
  </body>
</html>
