<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Argenta Intramas</title>
    <meta name="description"
        content="Argenta Teknika Intramas - Senantiasa membantu dalam penyediaan kebutuhan bisnis Anda dengan layanan terpercaya dan berkualitas tinggi.">
    <meta name="keywords" content="argenta, teknika, intramas, bisnis, layanan, perusahaan">
    <meta name="author" content="Argenta Teknika Intramas">

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://allhub.progesio.my.id" crossorigin>

    <!-- Critical CSS - Inline for faster loading -->
    <style>
        /* Critical CSS untuk above-the-fold content */
        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #7f1d1d;
            color: white;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* Header styles */
        .header-fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: linear-gradient(to bottom, #7f1d1d, rgba(127, 29, 29, 0.9), transparent);
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 0.1em;
        }

        /* Hero section critical styles */
        .hero-section {
            position: relative;
            height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0 1rem;
            margin-top: 4rem;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.45);
        }

        .hero-content {
            position: relative;
            max-width: 36rem;
            color: white;
            z-index: 10;
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero-subtitle {
            font-size: 1.125rem;
            font-weight: 400;
            opacity: 0.95;
        }

        /* Loading animation */
        .loading-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s;
        }

        .loading-spinner {
            width: 3rem;
            height: 3rem;
            border: 4px solid rgba(127, 29, 29, 0.3);
            border-top: 4px solid #7f1d1d;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Mobile responsive */
        @media (min-width: 768px) {
            .hero-title {
                font-size: 3rem;
            }

            .hero-subtitle {
                font-size: 1.25rem;
            }
        }

        /* Utility classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .btn-primary {
            background-color: #7f1d1d;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.375rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-primary:hover {
            background-color: #991b1b;
        }
    </style>

    <!-- Preload critical fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" as="style"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap">
    </noscript>

    <!-- Load Tailwind CSS asynchronously -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <script src="https://cdn.tailwindcss.com" defer></script>

    <!-- Load Owl Carousel CSS asynchronously -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" as="style"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    </noscript>

    <!-- Firebase SDK Scripts - Load asynchronously -->
    <script>
        // Load Firebase SDK asynchronously
        const loadFirebaseSDK = () => {
            const scripts = [
                '/__/firebase/11.10.0/firebase-app-compat.js',
                '/__/firebase/11.10.0/firebase-firestore-compat.js',
                '/__/firebase/11.10.0/firebase-analytics-compat.js',
                '/__/firebase/11.10.0/firebase-performance-compat.js',
                '/__/firebase/init.js?useEmulator=false'
            ];

            scripts.forEach((src, index) => {
                const script = document.createElement('script');
                script.src = src;
                script.defer = true;
                if (index === scripts.length - 1) {
                    script.onload = () => {
                        // Firebase loaded, initialize app
                        if (typeof firebase !== 'undefined') {
                            console.log('Firebase SDK loaded successfully');
                            // Initialize analytics and performance if available
                            if (typeof firebase.analytics === 'function') {
                                firebase.analytics();
                            }
                            if (typeof firebase.performance === 'function') {
                                firebase.performance();
                            }
                        }
                    };
                }
                document.head.appendChild(script);
            });
        };

        // Load Firebase after critical content
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadFirebaseSDK);
        } else {
            loadFirebaseSDK();
        }
    </script>
</head>

<body class="bg-red-900 text-white font-montserrat leading-relaxed">
    <header class="header-fixed">
        <nav class="nav-container">
            <div class="logo">
                <img src="https://allhub.progesio.my.id/storage/ARGENTA%20ASSET/Logo/Argenta Putih.png"
                    alt="Argenta Intramas Logo" class="h-10 w-auto max-h-12 object-contain align-middle"
                    style="max-width:160px;" loading="lazy" />
            </div>
            <!-- Hamburger button (mobile only) -->
            <button id="hamburger"
                class="md:hidden flex flex-col justify-center items-center w-10 h-10 focus:outline-none"
                aria-label="Open menu">
                <span class="block w-6 h-0.5 bg-white mb-1"></span>
                <span class="block w-6 h-0.5 bg-white mb-1"></span>
                <span class="block w-6 h-0.5 bg-white"></span>
            </button>
            <ul id="navMenu"
                class="hidden md:flex md:flex-row md:space-x-8 md:static md:bg-transparent md:w-auto md:h-auto md:opacity-100 md:visible fixed top-16 left-0 w-full bg-red-900/95 h-screen flex-col items-center justify-center space-y-8 md:space-y-0 opacity-0 invisible transition-all duration-300 z-40">
                <li class="w-full md:w-auto text-center"><a href="index.html"
                        class="block py-2 md:py-0 hover:text-red-500 font-medium">Perusahaan</a></li>
                <li class="w-full md:w-auto text-center"><a href="#"
                        class="block py-2 md:py-0 hover:text-red-500 font-medium">Layanan</a></li>
                <li class="w-full md:w-auto text-center"><a href="karir.html"
                        class="block py-2 md:py-0 hover:text-red-500 font-medium">Karir</a></li>
                <li class="w-full md:w-auto text-center"><a href="berita.html"
                        class="block py-2 md:py-0 hover:text-red-500 font-medium">Artikel</a></li>
                <li class="w-full md:w-auto text-center"><a href="#"
                        class="block py-2 md:py-0 hover:text-red-500 font-medium">Hubungi Kami</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section (akan di-render oleh JS) -->
    <section id="hero-section" class="relative"></section>

    <!-- Hapus section statis yang lama, hanya gunakan section dinamis -->
    <section id="tentang-kami"
        class="container mx-auto my-12 bg-red-800 rounded-lg shadow-lg overflow-hidden flex flex-col md:flex-row">
    </section>
    <section id="visi-misi" class="container mx-auto my-12 px-4 text-center text-white"></section>
    <section id="komisaris-direktur" class="bg-gradient-to-b from-red-900 via-black to-black text-white py-12">
    </section>
    <section id="koneksi-wilayah" class="bg-gradient-to-b from-red-900 via-black to-black text-white py-12"></section>
    <section id="layanan" class="bg-black text-white py-12"></section>
    <section id="perusahaan-dipercaya" class="bg-red-900 py-12"></section>

    <footer class="bg-black text-gray-300 mt-12 py-4">
        <div class="text-center">
            <h2 class="text-3xl font-extrabold mb-8 tracking-widest">
                <span class="font-extrabold">Hubungi Kami
            </h2>
        </div>
        <div
            class="border border-red-900 max-w-6xl mx-auto px-6 py-4 flex flex-col md:flex-row items-center justify-center gap-6">
            <div class="flex items-center space-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-900" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M17.657 16.657L13.414 12.414a2 2 0 10-2.828 2.828l4.243 4.243a8 8 0 1111.314-11.314z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Jl. Administrasi Negara I No. 30 Rt. 06 Rw. 07 Bend Hilir</span>
            </div>
            <div class="flex items-center space-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-900" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3 10h1l2 2-2 2H3v-4zM21 10h-1l-2 2 2 2h1v-4z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M7 10h10v4H7v-4z" />
                </svg>
                <span>0821-3345-7898</span>
            </div>
            <div class="flex items-center space-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-900" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 12h-4m0 0v-4m0 4v4m0-4h4" />
                    <rect width="20" height="14" x="2" y="5" rx="2" ry="2" />
                </svg>
                <span>ArgentaIntramas@gmail.com</span>
            </div>
        </div>
        <div class="max-w-6xl mx-auto px-6 py-10 grid grid-cols-1 md:grid-cols-4 gap-8 text-gray-400">
            <div>
                <div class="flex items-center mb-6 space-x-2">
                    <img src="https://allhub.progesio.my.id/storage/ARGENTA%20ASSET/Logo/Argenta%20logo.png"
                        alt="Argenta Logo"
                        class="h-10 w-auto max-h-12 object-contain align-middle rounded bg-white p-1 shadow-md"
                        style="max-width:140px;" loading="lazy" />
                </div>
                <ul class="space-y-2 text-sm">
                    <li><a href="#" class="hover:text-white">Tentang Kami</a></li>
                    <li><a href="#" class="hover:text-white">Berita</a></li>
                    <li><a href="#" class="hover:text-white">Karir</a></li>
                    <li><a href="#" class="hover:text-white">Layanan</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold mb-4">Lainnya</h3>
                <ul class="space-y-2 text-sm">
                    <li><a href="#" class="hover:text-white">Hubungi Kami</a></li>
                    <li><a href="#" class="hover:text-white">Legal</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold mb-4">Ikuti Kami</h3>
                <ul class="space-y-2 text-sm">
                    <li class="flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24h11.495v-9.294H9.691v-3.622h3.129V8.413c0-3.1 1.894-4.788 4.659-4.788 1.325 0 2.466.099 2.797.143v3.24l-1.918.001c-1.504 0-1.796.715-1.796 1.763v2.313h3.59l-.467 3.622h-3.123V24h6.116C23.4 24 24 23.4 24 22.675v-21.35C24 .6 23.4 0 22.675 0z" />
                        </svg>
                        <a href="#" class="hover:text-white">Facebook</a>
                    </li>
                    <li class="flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.35 3.608 1.325.975.975 1.263 2.242 1.325 3.608.058 1.266.07 1.645.07 4.85s-.012 3.584-.07 4.85c-.062 1.366-.35 2.633-1.325 3.608-.975.975-2.242 1.263-3.608 1.325-1.266.058-1.645.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.35-3.608-1.325-.975-.975-1.263-2.242-1.325-3.608C2.175 15.584 2.163 15.204 2.163 12s.012-3.584.07-4.85c.058-1.277.371-2.45 1.458-3.537 1.087-1.087 2.26-1.4 3.537-1.458 1.28.059 1.689.072 4.948.072s3.668-.013 4.948-.072c1.277-.058 2.45-.371 3.537-1.458 1.087-1.087 1.4-2.26 1.458-3.537.059-1.28.072-1.689.072-4.948s-.013-3.668-.072-4.948c-.058-1.277-.371-2.45-1.458-3.537-1.087-1.087-2.26-1.4-3.537-1.458C15.668.013 15.259 0 12 0z" />
                            <path
                                d="M12 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998z" />
                            <circle cx="18.406" cy="5.594" r="1.44" />
                        </svg>
                        <a href="#" class="hover:text-white">Instagram</a>
                    </li>
                    <li class="flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.354V9h3.414v1.561h.049c.476-.9 1.637-1.852 3.37-1.852 3.602 0 4.268 2.37 4.268 5.455v6.288z" />
                            <path
                                d="M5.337 7.433a2.062 2.062 0 1 1 0-4.124 2.062 2.062 0 0 1 0 4.124zM6.814 20.452H3.86V9h2.954v11.452z" />
                        </svg>
                        <a href="#" class="hover:text-white">LinkedIn</a>
                    </li>
                </ul>
            </div>
            <div class="md:col-span-4 text-center text-gray-500 text-xs mt-8">
                <p>© 2025 Argenta. All rights reserved.</p>
                <div class="flex justify-center space-x-4 mt-2">
                    <a href="#" class="hover:text-white underline text-xs">Privacy Policy</a>
                    <a href="#" class="hover:text-white underline text-xs">Terms of Service</a>
                    <a href="#" class="hover:text-white underline text-xs">Cookies Settings</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg max-w-lg w-full p-6 relative">
            <button id="closeModal"
                class="absolute top-2 right-2 text-gray-700 hover:text-gray-900 text-2xl font-bold">&times;</button>
            <h3 id="modalTitle" class="text-xl font-bold mb-4">-</h3>
            <p id="modalContent" class="text-gray-800"></p>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="page-loading" class="loading-overlay">
        <div class="loading-spinner"></div>
        <span class="text-white text-lg font-semibold">Memuat halaman...</span>
    </div>

    <!-- Load jQuery & Owl Carousel JS asynchronously -->
    <script>
        // Load external scripts asynchronously
        const loadExternalScripts = () => {
            const scripts = [
                'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js',
                'https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js'
            ];

            let loadedScripts = 0;

            scripts.forEach((src) => {
                const script = document.createElement('script');
                script.src = src;
                script.defer = true;
                script.onload = () => {
                    loadedScripts++;
                    if (loadedScripts === scripts.length) {
                        // All scripts loaded, initialize app
                        initializeApp();
                    }
                };
                document.head.appendChild(script);
            });
        };

        // Initialize app after all scripts are loaded
        const initializeApp = () => {
            // Wait for DOM to be ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', startApp);
            } else {
                startApp();
            }
        };

        // Start app
        const startApp = async () => {
            try {
                await loadKontenJSON();
                renderAllSections();
                initializeCarousels();
                setupEventListeners();
                hideLoading();
            } catch (error) {
                console.error('Error starting app:', error);
                hideLoading();
            }
        };

        // Load scripts when page is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadExternalScripts);
        } else {
            loadExternalScripts();
        }
    </script>

    <script>
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');
        const closeModal = document.getElementById('closeModal');
        const readMoreButtons = document.querySelectorAll('.read-more-btn');

        // Hapus semua deklarasi variabel konten dinamis, ganti dengan variabel global yang akan diisi dari JSON
        let kontenLayanan, kontenKomisarisDirektur, kontenVisiMisi, kontenKoneksiWilayah, kontenPerusahaanDipercaya, kontenTentangKami;

        // Default hero data
        defaultHeroData = {
            background: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1350&q=80",
            overlay: 0.45,
            title: "Senantiasa Membantu",
            subtitle: "Argenta Teknika Intramas siap membantu anda dalam penyediaan kebutuhan bisnis."
        };
        let kontenHero = defaultHeroData;

        // Enhanced image URL handler with optimization
        function getImageUrl(imagePath) {
            if (!imagePath) return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDYwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI2MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNTguMzM2IDE4MEM0OS42NzEgMTgwIDQ5LjY3MSAyMjAgMjU4LjMzNiAyMjBDNDY3IDE4MCA0NjcgMjIwIDI1OC4zMzYgMjIwWiIgZmlsbD0iI0U1RTdFQiIvPgo8L3N2Zz4K'; // Default placeholder

            // If already has protocol (http/https) or data URI, return as is
            if (imagePath.startsWith('http://') || imagePath.startsWith('https://') || imagePath.startsWith('data:')) {
                return imagePath;
            }

            // For relative paths, add base URL with optimization parameters
            const baseUrl = 'https://allhub.progesio.my.id/storage/';

            // Add optimization parameters for better loading
            const optimizedUrl = baseUrl + imagePath;

            // Add image optimization parameters if it's a supported image format
            if (imagePath.match(/\.(jpg|jpeg|png|webp)$/i)) {
                const separator = optimizedUrl.includes('?') ? '&' : '?';
                return optimizedUrl + separator + 'w=800&q=75&auto=format';
            }

            return optimizedUrl;
        }

        // Default data fallback
        const defaultData = {
            kontenLayanan: {
                "default": {
                    title: "Layanan Default",
                    desc: "Deskripsi layanan default",
                    image: "default.jpg"
                }
            },
            kontenKomisarisDirektur: {
                komisaris: {
                    nama: "Nama Komisaris",
                    jabatan: "Komisaris",
                    desc: "Deskripsi komisaris",
                    image: "https://via.placeholder.com/300"
                },
                direktur: {
                    nama: "Nama Direktur",
                    jabatan: "Direktur",
                    desc: "Deskripsi direktur",
                    image: "https://via.placeholder.com/300"
                }
            },
            kontenVisiMisi: {
                visi: "Visi default perusahaan",
                misi: ["Misi 1", "Misi 2", "Misi 3"]
            },
            kontenKoneksiWilayah: {
                judul: "Koneksi Wilayah",
                deskripsi: "Deskripsi koneksi wilayah",
                image: "https://via.placeholder.com/600x400"
            },
            kontenPerusahaanDipercaya: {
                judul: "Perusahaan Dipercaya",
                logo: [
                    { nama: "Partner 1", image: null },
                    { nama: "Partner 2", image: null }
                ]
            },
            kontenTentangKami: {
                judul: "Tentang Kami",
                image: "https://via.placeholder.com/600x400",
                paragraf: ["Paragraf tentang kami 1", "Paragraf tentang kami 2"]
            }
        };

        // Fungsi helper untuk mengelola cache di Firebase Firestore
        const CACHE_COLLECTION = 'argentaCache';
        const CACHE_DOCUMENT_ID = 'mainContent';

        async function setCacheToFirebase(data) {
            try {
                if (typeof firebase === 'undefined' || !firebase.firestore) {
                    console.log('Firebase Firestore tidak tersedia, menggunakan cache cookies');
                    setCookie('argentaData', data, 1);
                    setCookie('argentaDataTimestamp', Date.now(), 1);
                    return;
                }

                const db = firebase.firestore();
                const cacheRef = db.collection(CACHE_COLLECTION).doc(CACHE_DOCUMENT_ID);

                await cacheRef.set({
                    data: data,
                    timestamp: Date.now(),
                    expiry: Date.now() + (60 * 60 * 1000), // 1 jam dari sekarang
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });

                console.log('Data berhasil disimpan ke Firebase cache');
            } catch (error) {
                console.error('Error menyimpan ke Firebase cache:', error);
                // Fallback ke cookies jika Firebase gagal
                setCookie('argentaData', data, 1);
                setCookie('argentaDataTimestamp', Date.now(), 1);
            }
        }

        async function getCacheFromFirebase() {
            try {
                if (typeof firebase === 'undefined' || !firebase.firestore) {
                    console.log('Firebase Firestore tidak tersedia, menggunakan cache cookies');
                    return {
                        data: getCookie('argentaData'),
                        timestamp: getCookie('argentaDataTimestamp'),
                        isValid: false
                    };
                }

                const db = firebase.firestore();
                const cacheRef = db.collection(CACHE_COLLECTION).doc(CACHE_DOCUMENT_ID);
                const doc = await cacheRef.get();

                if (doc.exists) {
                    const cacheData = doc.data();
                    const now = Date.now();
                    const isValid = now < cacheData.expiry;

                    console.log(`Firebase cache ditemukan, valid: ${isValid}`);
                    return {
                        data: cacheData.data,
                        timestamp: cacheData.timestamp,
                        isValid: isValid
                    };
                } else {
                    console.log('Tidak ada cache di Firebase');
                    return { data: null, timestamp: null, isValid: false };
                }
            } catch (error) {
                console.error('Error mengambil dari Firebase cache:', error);
                // Fallback ke cookies jika Firebase gagal
                const cachedData = getCookie('argentaData');
                const cacheTimestamp = getCookie('argentaDataTimestamp');
                const isValid = cachedData && cacheTimestamp && (Date.now() - cacheTimestamp < 3600000);

                return {
                    data: cachedData,
                    timestamp: cacheTimestamp,
                    isValid: isValid
                };
            }
        }

        async function clearCacheFromFirebase() {
            try {
                if (typeof firebase === 'undefined' || !firebase.firestore) {
                    console.log('Firebase Firestore tidak tersedia, menghapus cache cookies');
                    deleteCookie('argentaData');
                    deleteCookie('argentaDataTimestamp');
                    return;
                }

                const db = firebase.firestore();
                const cacheRef = db.collection(CACHE_COLLECTION).doc(CACHE_DOCUMENT_ID);
                await cacheRef.delete();

                console.log('Firebase cache berhasil dihapus');
            } catch (error) {
                console.error('Error menghapus Firebase cache:', error);
                // Fallback hapus cookies
                deleteCookie('argentaData');
                deleteCookie('argentaDataTimestamp');
            }
        }

        // Fungsi helper untuk mengelola cookies (sebagai fallback)
        function setCookie(name, value, hours) {
            const date = new Date();
            date.setTime(date.getTime() + (hours * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + JSON.stringify(value) + ";" + expires + ";path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) {
                    try {
                        return JSON.parse(c.substring(nameEQ.length, c.length));
                    } catch (e) {
                        return null;
                    }
                }
            }
            return null;
        }

        function deleteCookie(name) {
            document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        }

        // Enhanced load content with error handling and retries
        async function loadKontenJSON() {
            const maxRetries = 3;
            let retryCount = 0;

            while (retryCount < maxRetries) {
                try {
                    // Check Firebase cache first
                    const cacheResult = await getCacheFromFirebase();

                    // If cache is valid, use it
                    if (cacheResult.data && cacheResult.isValid) {
                        console.log('Using data from Firebase cache');
                        assignDataFromCache(cacheResult.data);
                        return;
                    }

                    // Fetch from API with timeout
                    console.log('Fetching fresh data from API');
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout

                    const res = await fetch('https://allhub.progesio.my.id/api/hub/argenta/index', {
                        signal: controller.signal,
                        headers: {
                            'Accept': 'application/json',
                            'Cache-Control': 'no-cache'
                        }
                    });

                    clearTimeout(timeoutId);

                    if (!res.ok) {
                        throw new Error(`HTTP error! status: ${res.status}`);
                    }

                    const response = await res.json();

                    // Validate response structure
                    if (!response.data || !Array.isArray(response.data) || response.data.length === 0) {
                        throw new Error('Invalid API response format');
                    }

                    const data = response.data[0];
                    assignDataFromAPI(data);

                    // Save to Firebase cache
                    await setCacheToFirebase(data);

                    console.log('Data successfully loaded from API and cached');
                    return;

                } catch (error) {
                    console.error(`Attempt ${retryCount + 1} failed:`, error);
                    retryCount++;

                    if (retryCount < maxRetries) {
                        console.log(`Retrying in ${retryCount * 1000}ms...`);
                        await new Promise(resolve => setTimeout(resolve, retryCount * 1000));
                    }
                }
            }

            // If all retries failed, use default data
            console.error('All attempts failed, using default data');
            await clearCacheFromFirebase();
            assignDefaultData();
        }

        // Helper function to assign data from cache
        function assignDataFromCache(cachedData) {
            kontenHero = cachedData.kontenHero || defaultHeroData;
            kontenLayanan = cachedData.kontenLayanan || defaultData.kontenLayanan;
            kontenKomisarisDirektur = cachedData.kontenKomisarisDirektur &&
                (cachedData.kontenKomisarisDirektur.komisaris || cachedData.kontenKomisarisDirektur.direktur) ?
                {
                    komisaris: cachedData.kontenKomisarisDirektur.komisaris || null,
                    direktur: cachedData.kontenKomisarisDirektur.direktur || null
                } : defaultData.kontenKomisarisDirektur;
            kontenVisiMisi = cachedData.kontenVisiMisi || defaultData.kontenVisiMisi;
            kontenKoneksiWilayah = cachedData.kontenKoneksiWilayah || defaultData.kontenKoneksiWilayah;
            kontenPerusahaanDipercaya = cachedData.kontenPerusahaanDipercaya ?
                {
                    judul: cachedData.kontenPerusahaanDipercaya.judul || defaultData.kontenPerusahaanDipercaya.judul,
                    logo: cachedData.kontenPerusahaanDipercaya.logo || null
                } : defaultData.kontenPerusahaanDipercaya;
            kontenTentangKami = cachedData.kontenTentangKami || defaultData.kontenTentangKami;
        }

        // Helper function to assign data from API
        function assignDataFromAPI(data) {
            kontenHero = data.kontenHero || defaultHeroData;
            kontenLayanan = data.kontenLayanan || defaultData.kontenLayanan;
            kontenKomisarisDirektur = data.kontenKomisarisDirektur &&
                (data.kontenKomisarisDirektur.komisaris || data.kontenKomisarisDirektur.direktur) ?
                {
                    komisaris: data.kontenKomisarisDirektur.komisaris || null,
                    direktur: data.kontenKomisarisDirektur.direktur || null
                } : defaultData.kontenKomisarisDirektur;
            kontenVisiMisi = data.kontenVisiMisi || defaultData.kontenVisiMisi;
            kontenKoneksiWilayah = data.kontenKoneksiWilayah || defaultData.kontenKoneksiWilayah;
            kontenPerusahaanDipercaya = data.kontenPerusahaanDipercaya ?
                {
                    judul: data.kontenPerusahaanDipercaya.judul || defaultData.kontenPerusahaanDipercaya.judul,
                    logo: data.kontenPerusahaanDipercaya.logo || null
                } : defaultData.kontenPerusahaanDipercaya;
            kontenTentangKami = data.kontenTentangKami || defaultData.kontenTentangKami;
        }

        // Helper function to assign default data
        function assignDefaultData() {
            kontenHero = defaultHeroData;
            kontenLayanan = defaultData.kontenLayanan;
            kontenKomisarisDirektur = defaultData.kontenKomisarisDirektur;
            kontenVisiMisi = defaultData.kontenVisiMisi;
            kontenKoneksiWilayah = defaultData.kontenKoneksiWilayah;
            kontenPerusahaanDipercaya = defaultData.kontenPerusahaanDipercaya;
            kontenTentangKami = defaultData.kontenTentangKami;
        }

        // Fungsi untuk menghapus cache manual (bisa dipanggil dari console untuk testing)
        async function clearCache() {
            await clearCacheFromFirebase();
            console.log('Cache data Argenta berhasil dihapus dari Firebase');
        }

        // Fungsi untuk cek status cache (bisa dipanggil dari console untuk testing)
        async function checkCache() {
            try {
                const cacheResult = await getCacheFromFirebase();

                if (cacheResult.data && cacheResult.isValid) {
                    const timeLeft = cacheResult.data.expiry ? cacheResult.data.expiry - Date.now() : 0;
                    const minutesLeft = Math.floor(timeLeft / 60000);
                    console.log(`Firebase cache tersedia, sisa waktu: ${minutesLeft} menit`);
                    return {
                        hasCache: true,
                        minutesLeft: minutesLeft,
                        data: cacheResult.data,
                        source: 'firebase'
                    };
                } else {
                    console.log('Tidak ada cache tersedia di Firebase');
                    return { hasCache: false, source: 'firebase' };
                }
            } catch (error) {
                console.error('Error checking Firebase cache:', error);
                return { hasCache: false, error: error.message };
            }
        }        // Fungsi untuk force refresh data (bypass cache)
        async function forceRefreshData() {
            console.log('Force refresh: menghapus cache dan mengambil data fresh dari API');
            await clearCacheFromFirebase();
            await loadKontenJSON();

            // Re-render semua komponen
            renderHero();
            renderVisiMisi();
            renderKomisarisDirektur();
            renderKoneksiWilayah();
            renderLayanan();
            renderPerusahaanDipercaya();
            renderTentangKami();

            // Reinitialize carousels
            setTimeout(function () {
                $('.layanan-carousel').trigger('destroy.owl.carousel').removeClass('owl-carousel owl-loaded');
                $('.hero-carousel').trigger('destroy.owl.carousel').removeClass('owl-carousel owl-loaded');
                $('.owl-carousel.owl-theme').trigger('destroy.owl.carousel').removeClass('owl-carousel owl-loaded');

                $('.layanan-carousel').addClass('owl-carousel').owlCarousel({
                    loop: true,
                    margin: 24,
                    nav: false,
                    dots: true,
                    responsive: {
                        0: { items: 1 },
                        600: { items: 2 },
                        1000: { items: 3 }
                    }
                });
                $('.hero-carousel').addClass('owl-carousel').owlCarousel({
                    items: 1,
                    loop: true,
                    nav: false,
                    dots: true,
                    autoplay: true,
                    autoplayTimeout: 5000,
                    animateOut: 'fadeOut',
                    animateIn: 'fadeIn',
                    smartSpeed: 800
                });
                $('.owl-carousel.owl-theme').addClass('owl-carousel').owlCarousel({
                    loop: true,
                    margin: 24,
                    nav: false,
                    dots: true,
                    responsive: {
                        0: { items: 1 },
                        600: { items: 2 },
                        1000: { items: 3 }
                    }
                });
            }, 500);

            console.log('Force refresh selesai');
        }

        // Fungsi untuk mengelola image cache (Service Worker)
        async function clearImageCache() {
            if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
                return new Promise((resolve, reject) => {
                    const messageChannel = new MessageChannel();
                    messageChannel.port1.onmessage = (event) => {
                        if (event.data.success) {
                            console.log('Image cache berhasil dihapus');
                            resolve();
                        } else {
                            reject(new Error('Gagal menghapus image cache'));
                        }
                    };

                    navigator.serviceWorker.controller.postMessage(
                        { type: 'CLEAR_IMAGE_CACHE' },
                        [messageChannel.port2]
                    );
                });
            } else {
                console.log('Service Worker tidak tersedia');
            }
        }

        async function getImageCacheInfo() {
            if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
                return new Promise((resolve, reject) => {
                    const messageChannel = new MessageChannel();
                    messageChannel.port1.onmessage = (event) => {
                        console.log('Image cache info:', event.data);
                        resolve(event.data);
                    };

                    navigator.serviceWorker.controller.postMessage(
                        { type: 'GET_CACHE_INFO' },
                        [messageChannel.port2]
                    );
                });
            } else {
                console.log('Service Worker tidak tersedia');
                return { itemCount: 0, urls: [] };
            }
        }

        // Render all sections
        function renderAllSections() {
            renderHero();
            renderVisiMisi();
            renderKomisarisDirektur();
            renderKoneksiWilayah();
            renderLayanan();
            renderPerusahaanDipercaya();
            renderTentangKami();
        }

        // Initialize carousels
        function initializeCarousels() {
            // Wait for jQuery to be available
            if (typeof $ === 'undefined') {
                setTimeout(initializeCarousels, 100);
                return;
            }

            setTimeout(() => {
                try {
                    // Initialize Layanan Carousel
                    const $layananCarousel = $('.layanan-carousel');
                    if ($layananCarousel.length) {
                        $layananCarousel.owlCarousel({
                            loop: true,
                            margin: 24,
                            nav: false,
                            dots: true,
                            responsive: {
                                0: { items: 1 },
                                600: { items: 2 },
                                1000: { items: 3 }
                            }
                        });
                    }

                    // Initialize Hero Carousel
                    const $heroCarousel = $('.hero-carousel');
                    if ($heroCarousel.length) {
                        $heroCarousel.owlCarousel({
                            items: 1,
                            loop: true,
                            nav: false,
                            dots: true,
                            autoplay: true,
                            autoplayTimeout: 5000,
                            animateOut: 'fadeOut',
                            animateIn: 'fadeIn',
                            smartSpeed: 800
                        });
                    }

                    // Initialize Company Carousel
                    const $companyCarousel = $('.owl-carousel.owl-theme');
                    if ($companyCarousel.length) {
                        $companyCarousel.owlCarousel({
                            loop: true,
                            margin: 24,
                            nav: false,
                            dots: true,
                            responsive: {
                                0: { items: 1 },
                                600: { items: 2 },
                                1000: { items: 3 }
                            }
                        });
                    }
                } catch (error) {
                    console.error('Error initializing carousels:', error);
                }
            }, 200);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Hamburger menu
            setupHamburgerMenu();

            // Navigation loading
            setupNavigationLoading();

            // Service worker registration
            registerServiceWorker();
        }

        // Setup hamburger menu
        function setupHamburgerMenu() {
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('navMenu');

            if (!hamburger || !navMenu) return;

            function showMenu() {
                navMenu.classList.remove('opacity-0', 'invisible', 'hidden');
                navMenu.classList.add('opacity-100', 'visible');
            }

            function hideMenu() {
                navMenu.classList.remove('opacity-100', 'visible');
                navMenu.classList.add('opacity-0', 'invisible', 'hidden');
            }

            hamburger.addEventListener('click', () => {
                const isOpen = navMenu.classList.contains('opacity-100');
                if (isOpen) {
                    hideMenu();
                } else {
                    showMenu();
                }
            });

            // Close menu on link click (mobile)
            navMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 768) {
                        hideMenu();
                    }
                });
            });

            // Responsive handling
            window.addEventListener('resize', () => {
                if (window.innerWidth >= 768) {
                    navMenu.classList.remove('opacity-0', 'invisible', 'hidden', 'flex-col', 'items-center', 'justify-center', 'space-y-8');
                    navMenu.classList.add('opacity-100', 'visible', 'flex', 'flex-row', 'space-x-8');
                } else {
                    hideMenu();
                    navMenu.classList.remove('flex-row', 'space-x-8');
                    navMenu.classList.add('flex-col', 'items-center', 'justify-center', 'space-y-8');
                }
            });

            // Initial state
            if (window.innerWidth >= 768) {
                navMenu.classList.remove('opacity-0', 'invisible', 'hidden', 'flex-col', 'items-center', 'justify-center', 'space-y-8');
                navMenu.classList.add('opacity-100', 'visible', 'flex', 'flex-row', 'space-x-8');
            } else {
                hideMenu();
                navMenu.classList.remove('flex-row', 'space-x-8');
                navMenu.classList.add('flex-col', 'items-center', 'justify-center', 'space-y-8');
            }
        }

        // Setup navigation loading
        function setupNavigationLoading() {
            document.querySelectorAll('#navMenu a').forEach(link => {
                link.addEventListener('click', function (e) {
                    const href = link.getAttribute('href');
                    if (href && href !== '#' && !href.startsWith('javascript:')) {
                        showLoading();
                    }
                });
            });
        }

        // Register service worker
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            }
        }
        // Render hero section with optimized images
        function renderHero() {
            const el = document.getElementById('hero-section');
            if (!el) return;

            // Add hero-section class for styling
            el.className = 'hero-section';

            // If kontenHero is array, render carousel, otherwise render single slide
            let slides = Array.isArray(kontenHero) ? kontenHero : [kontenHero];

            if (slides.length === 1) {
                // Single slide - no carousel needed
                const hero = slides[0];
                el.style.backgroundImage = `url('${getImageUrl(hero.background)}')`;
                el.innerHTML = `
                    <div class="hero-overlay"></div>
                    <div class="hero-content">
                        <h1 class="hero-title">${hero.title}</h1>
                        <div class="hero-subtitle">${hero.subtitle}</div>
                    </div>
                `;
            } else {
                // Multiple slides - use carousel
                el.innerHTML = `
                    <div class="owl-carousel hero-carousel">
                        ${slides.map(hero => `
                            <div class="hero-section" style="background-image: url('${getImageUrl(hero.background)}');">
                                <div class="hero-overlay"></div>
                                <div class="hero-content">
                                    <h1 class="hero-title">${hero.title}</h1>
                                    <div class="hero-subtitle">${hero.subtitle}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }
        function renderVisiMisi() {
            const visiMisi = document.getElementById('visi-misi');
            visiMisi.innerHTML = `
        <h2 class="text-3xl font-bold mb-8 tracking-widest">VISI & MISI</h2>
        <div class="flex flex-col md:flex-row justify-center gap-12 max-w-5xl mx-auto text-left">
          <div class="md:w-1/2">
            <h3 class="text-xl font-semibold mb-4 tracking-wide">Visi</h3>
            <p class="text-base leading-relaxed whitespace-pre-line">${kontenVisiMisi.visi}</p>
          </div>
          <div class="md:w-1/2">
            <h3 class="text-xl font-semibold mb-4 tracking-wide">Misi</h3>
            <ol class="list-decimal list-inside space-y-2 text-base leading-relaxed">
              ${kontenVisiMisi.misi.map(m => `<li>${m}</li>`).join('')}
            </ol>
          </div>
        </div>
      `;
        }
        function renderKomisarisDirektur() {
            const el = document.getElementById('komisaris-direktur');

            // Cek apakah data komisaris dan direktur ada dan tidak null
            if (!kontenKomisarisDirektur ||
                (!kontenKomisarisDirektur.komisaris && !kontenKomisarisDirektur.direktur)) {
                el.innerHTML = `
          <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-8 tracking-widest">KOMISARIS DAN DIREKTUR</h2>
            <p class="text-lg">Data komisaris dan direktur sedang tidak tersedia.</p>
          </div>
        `;
                return;
            }

            el.innerHTML = `
        <div class="container mx-auto px-4 text-center">
          <h2 class="text-3xl font-bold mb-8 tracking-widest">KOMISARIS DAN DIREKTUR</h2>
          <div class="flex flex-col md:flex-row justify-center gap-16 max-w-5xl mx-auto text-center">
            ${kontenKomisarisDirektur.komisaris ? `
            <div class="md:w-1/2">
              <h3 class="text-4xl font-normal mb-2">Komisaris</h3>
              <div class="h-3 w-3/4 bg-red-900 mx-auto mb-6"></div>
              <div class="relative group mx-auto w-72 h-72 rounded overflow-hidden shadow-lg">
                <img src="${getImageUrl(kontenKomisarisDirektur.komisaris.image)}" alt="Komisaris" class="object-cover w-full h-full grayscale group-hover:grayscale-0 transition duration-300 group-hover:scale-125" />
                <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-red-900/90 to-transparent p-4 flex flex-col items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  <div class="text-lg font-bold text-white">${kontenKomisarisDirektur.komisaris.nama}</div>
                  <div class="text-sm text-white">${kontenKomisarisDirektur.komisaris.jabatan}</div>
                  <div class="text-xs text-white mt-1">${kontenKomisarisDirektur.komisaris.desc}</div>
                </div>
              </div>
            </div>
            ` : ''}
            ${kontenKomisarisDirektur.direktur ? `
            <div class="md:w-1/2">
              <h3 class="text-4xl font-normal mb-2">Direktur</h3>
              <div class="h-3 w-3/4 bg-red-900 mx-auto mb-6"></div>
              <div class="relative group mx-auto w-72 h-72 rounded overflow-hidden shadow-lg">
                <img src="${getImageUrl(kontenKomisarisDirektur.direktur.image)}" alt="Direktur" class="object-cover w-full h-full grayscale group-hover:grayscale-0 transition duration-300 group-hover:scale-125" />
                <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-red-900/90 to-transparent p-4 flex flex-col items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  <div class="text-lg font-bold text-white">${kontenKomisarisDirektur.direktur.nama}</div>
                  <div class="text-sm text-white">${kontenKomisarisDirektur.direktur.jabatan}</div>
                  <div class="text-xs text-white mt-1">${kontenKomisarisDirektur.direktur.desc}</div>
                </div>
              </div>
            </div>
            ` : ''}
          </div>
        </div>
      `;
        }
        function renderKoneksiWilayah() {
            const el = document.getElementById('koneksi-wilayah');
            el.innerHTML = `
        <div class="container mx-auto px-4 text-center">
          <h2 class="text-3xl font-bold mb-4 tracking-widest">${kontenKoneksiWilayah.judul}</h2>
          <p class="mb-8 max-w-2xl mx-auto">${kontenKoneksiWilayah.deskripsi}</p>
          <div class="w-full h-96 md:h-[700px] lg:h-[800px] rounded-lg overflow-hidden shadow-2xl border border-red-700">
            <iframe 
              src="./dector/Neo.html" 
              width="100%" 
              height="100%" 
              frameborder="0" 
              allowfullscreen
              title="Peta Koneksi Wilayah"
              class="w-full h-full">
            </iframe>
          </div>
        </div>
      `;
        }
        function renderLayanan() {
            const el = document.getElementById('layanan');
            el.innerHTML = `
        <div class="container mx-auto px-4">
          <h2 class="text-3xl font-bold mb-8 tracking-widest text-center">LAYANAN KAMI</h2>
          <div class="owl-carousel layanan-carousel">
            ${Object.values(kontenLayanan).map(l => `
              <div class="bg-white text-black rounded shadow-lg grayscale hover:grayscale-0 transition duration-300 ease-in-out cursor-pointer p-6 flex flex-col">
                <div class="flex items-center mb-4">
                  <svg class="w-10 h-10 text-red-900 mr-3" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 7L9 19L3 13"></path></svg>
                  <h3 class="font-bold uppercase text-lg">${l.title}</h3>
                </div>
                <p class="text-sm mb-6 flex-grow">${l.desc}</p>
                <button class="read-more-btn self-start bg-red-900 text-white px-4 py-2 rounded hover:bg-red-700 transition flex items-center gap-2">
                  Read More
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"></path></svg>
                </button>
              </div>
            `).join('')}
          </div>
        </div>
      `;
        }
        function renderPerusahaanDipercaya() {
            const el = document.getElementById('perusahaan-dipercaya');

            // Cek apakah data logo ada dan tidak null
            if (!kontenPerusahaanDipercaya || !kontenPerusahaanDipercaya.logo) {
                el.innerHTML = `
          <div class="container mx-auto px-4 text-center text-white max-w-6xl">
            <h2 class="text-3xl font-extrabold mb-8 tracking-widest">
              ${kontenPerusahaanDipercaya?.judul || 'Perusahaan Dipercaya'}
            </h2>
            <p class="text-lg">Data perusahaan mitra sedang tidak tersedia.</p>
          </div>
        `;
                return;
            }

            el.innerHTML = `
        <div class="container mx-auto px-4 text-center text-white max-w-6xl">
          <h2 class="text-3xl font-extrabold mb-8 tracking-widest">
            <span class="font-extrabold">${kontenPerusahaanDipercaya.judul.split(' ')[0]}</span> ${kontenPerusahaanDipercaya.judul.split(' ').slice(1).join(' ')}
          </h2>
          <div class="owl-carousel owl-theme mb-8">
            ${kontenPerusahaanDipercaya.logo.map(l => `
              <div class="flex items-center justify-center rounded-full h-20 w-40 mx-auto" style="width: inherit;">
                ${l.image ? `<img src="${getImageUrl(l.image)}" alt="${l.nama}" class="h-12 object-contain"  />` : `<span class="text-red-900 font-bold text-lg">${l.nama}</span>`}
              </div>
            `).join('')}
          </div>
        </div>
      `;
        }
        function renderTentangKami() {
            const el = document.getElementById('tentang-kami');
            el.innerHTML = `
        <div class=\"md:w-1/2 relative\">
          <img src=\"${getImageUrl(kontenTentangKami.image)}\" alt=\"Meeting room\" class=\"w-full h-full object-cover\" />
          <div class=\"absolute inset-0 bg-gradient-to-t md:bg-gradient-to-l from-red-900/90 to-transparent\"></div>
        </div>
        <div class=\"md:w-1/2 p-8 flex flex-col justify-center text-white\">
          <h2 class=\"text-3xl font-bold mb-4 tracking-wide\">${kontenTentangKami.judul}</h2>
          ${kontenTentangKami.paragraf.map(p => `<p class=\"mb-4 text-base leading-relaxed\">${p}</p>`).join('')}
        </div>
      `;
        }
        // Loading overlay management
        function showLoading() {
            const loading = document.getElementById('page-loading');
            if (loading) {
                loading.style.opacity = '1';
                loading.style.pointerEvents = 'auto';
                loading.style.display = 'flex';
            }
        }

        function hideLoading() {
            const loading = document.getElementById('page-loading');
            if (loading) {
                loading.style.opacity = '0';
                loading.style.pointerEvents = 'none';
                setTimeout(() => {
                    loading.style.display = 'none';
                }, 400);
            }
        }
        document.addEventListener('DOMContentLoaded', async function () {
            console.log('DOM loaded, app initialization handled by async script loader');
            const checkFirebaseStatus = () => {
                if (typeof firebase !== 'undefined') {
                    console.log('Firebase SDK detected and ready');
                } else {
                    console.log('Firebase SDK still loading...');
                    setTimeout(checkFirebaseStatus, 500);
                }
            };
            setTimeout(checkFirebaseStatus, 1000);
        });
    </script>
</body>

</html>